(this.webpackJsonpauth=this.webpackJsonpauth||[]).push([[0],{311:function(e,t,a){e.exports=a(488)},342:function(e,t,a){},348:function(e,t){},350:function(e,t){},361:function(e,t){},363:function(e,t){},390:function(e,t){},392:function(e,t){},393:function(e,t){},398:function(e,t){},400:function(e,t){},406:function(e,t){},408:function(e,t){},427:function(e,t){},439:function(e,t){},442:function(e,t){},488:function(e,t,a){"use strict";a.r(t);var n,r,c,o,l,u=a(0),i=a.n(u),s=a(24),m=a.n(s),p=a(36),d=a(20),f=a(10),b=a.n(f),g=a(21),E=a(18),h=a(65),w=a(33),v=a(544),j=a(548),O=a(167),y=a(541),x=a(53),k=a(547),_=a(538),C=a(546),S=a(264),T=(a(341),a(342),function(e){var t=e.children;return i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,{title:"churulik",meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]},i.a.createElement("html",{lang:"en"})),i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},t))}),I=a(545),F=Object(p.atom)({key:"loggedInUser",default:{sub:null,email_verified:null,phone_number_verified:null,email:null,username:null,token:null}}),N=Object(p.atom)({key:"navigation",default:"home"}),P=(Object(p.atom)({key:"items",default:{rows:[]}}),Object(p.atom)({key:"modal",default:!1}),a(543)),q={UserNotFoundException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430",AuthError:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b \u0438 \u043f\u0430\u0440\u043e\u043b\u0430 \u043d\u0435 \u043c\u043e\u0433\u0430\u0442 \u0434\u0430 \u0431\u044a\u0434\u0430\u0442 \u043f\u0440\u0430\u0437\u043d\u0438",CodeMismatchException:"\u043d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u043a\u043e\u0434, \u043c\u043e\u043b\u044f \u043f\u0440\u043e\u0431\u0432\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e",NotAuthorizedException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0430 \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0438",UsernameExistsException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430",PasswordNotMatch:"\u043f\u0430\u0440\u043e\u043b\u0438\u0442\u0435 \u043d\u0435 \u043f\u0430\u0441\u0432\u0430\u0442",InvalidParameterException:"\u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u043f\u043e\u043d\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0430",Empty:""},J=function(e){return i.a.createElement("div",null,Object.entries(e).map((function(e){var t=Object(E.a)(e,2),a=(t[0],t[1]);return"Empty"!==a.name&&i.a.createElement(P.a,{description:q[a.name]?q[a.name]:"".concat(a.message,"-").concat(a.name),type:"error"})})))},M={Input:{height:40,margin:"10px 0px",padding:7,width:"100%"},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},A=function(e){var t=e.type,a=Object(p.useRecoilState)(F),n=Object(E.a)(a,2),r=n[0],c=n[1],o=Object(u.useState)(""),l=Object(E.a)(o,2),s=l[0],m=l[1],f=Object(u.useState)(""),h=Object(E.a)(f,2),w=h[0],v=h[1],j=Object(u.useState)(null),O=Object(E.a)(j,2),x=O[0],k=O[1],_=Object(p.useRecoilState)(N),C=Object(E.a)(_,2),S=C[0],T=C[1];Object(u.useEffect)((function(){T("login")}),[T,S]);var P=function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.signIn(s,w);case 3:return e.next=5,y.a.currentAuthenticatedUser();case 5:return t=e.sent,e.next=8,y.a.currentSession();case 8:a=e.sent,n=Object(d.a)(Object(d.a)({},t.attributes),{},{username:t.username,token:a.accessToken.jwtToken,refreshtoken:a.refreshToken.token}),c(n),localStorage.setItem("user",JSON.stringify(n)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),k(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,r.x&&i.a.createElement(J,{errorMessage:x}),x&&i.a.createElement(J,{errorMessage:x}),"compact"===t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{onChange:function(e){return m(e.target.value)},placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:s,style:M.InputCompact}),i.a.createElement(I.a,{onChange:function(e){return v(e.target.value)},placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:w,type:"password",style:M.InputCompact}),i.a.createElement("div",{style:M.buttonCompact,onClick:P},i.a.createElement("span",{style:M.buttonCompact},"\u0412\u0445\u043e\u0434"))),"full"===t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{onChange:function(e){return m(e.target.value)},placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:s,style:M.Input}),i.a.createElement(I.a,{onChange:function(e){return v(e.target.value)},placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:w,type:"password",style:M.Input}),i.a.createElement("div",{style:M.button,onClick:P},i.a.createElement("span",{style:M.buttonText},"\u0412\u0445\u043e\u0434"))))},D=a(44),R=a(78),z=a.n(R),U={api:"https://crlzp2fwh8.execute-api.eu-west-1.amazonaws.com/dev"},B=function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("".concat(U.api,"/heartbeat"),{headers:{accesstoken:t,"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",new Promise((function(e){e(a)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(g.a)(b.a.mark((function e(t,a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("".concat(U.api,"/db/").concat(t),JSON.stringify(a),{headers:{accesstoken:n,"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",new Promise((function(e){e(r)})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("".concat(U.api,"/register"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",new Promise((function(e){e(a)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L={Input:{height:40,margin:"10px 0px",padding:7},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},V=function(){var e=Object(p.useRecoilState)(N),t=Object(E.a)(e,2),a=t[0],n=t[1],r=Object(u.useState)({username:"",password:"",email:"",authCode:"",stage:0,error:""}),c=Object(E.a)(r,2),o=c[0],l=c[1];Object(u.useEffect)((function(){n("signup")}),[n,a]);var s=function(e){l(Object(d.a)(Object(d.a)({},o),{},Object(D.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.username,a=o.password,n=o.email,e.prev=1,e.next=4,y.a.signUp({username:t,password:a,attributes:{email:n}});case 4:l(Object(d.a)(Object(d.a)({},o),{},{stage:1,error:{name:"Empty"}})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),l(Object(d.a)(Object(d.a)({},o),{},{error:e.t0})),console.log("error signing up...",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(g.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.username,a=o.authCode,n=o.email,e.prev=1,e.next=4,y.a.confirmSignUp(t,a);case 4:return e.next=6,K({username:t,email:n,tip:"usersauth",vreme:(new Date).getTime()});case 6:l(Object(d.a)(Object(d.a)({},o),{},{stage:2,error:{name:"Empty"}})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l(Object(d.a)(Object(d.a)({},o),{},{error:e.t0})),console.log("error confirming signing up...",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",null,0===o.stage&&i.a.createElement("div",{style:L.formContainer},i.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.error&&i.a.createElement(J,{errorMessage:o.error}),i.a.createElement(I.a,{onChange:s,placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:o.username,style:L.Input}),i.a.createElement(I.a,{onChange:s,placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:o.password,type:"password",style:L.Input}),i.a.createElement(I.a,{onChange:s,placeholder:"Email",name:"email",value:o.email,style:L.Input}),i.a.createElement("div",{style:L.button,onClick:m},i.a.createElement("span",{style:L.buttonText},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),1===o.stage&&i.a.createElement("div",{style:L.formContainer},i.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.error&&i.a.createElement(J,{errorMessage:o.error}),i.a.createElement(I.a,{onChange:s,placeholder:"Authorization Code",name:"authCode",value:o.authCode,style:L.Input}),i.a.createElement("div",{style:L.button,onClick:f},i.a.createElement("span",{style:L.buttonText},"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),2===o.stage&&i.a.createElement(i.a.Fragment,null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430 ,",i.a.createElement("a",{href:"/app/login"},"\u0412\u0445\u043e\u0434")))},W={Input:{height:40,margin:"10px 0px",padding:7,width:"100%"},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},G=function(){var e=Object(p.useRecoilState)(N),t=Object(E.a)(e,2),a=t[0],n=t[1],r=Object(u.useState)({username:"",error:"",validation:"",password:"",confirmPassword:"",stage:0}),c=Object(E.a)(r,2),o=c[0],l=c[1];Object(u.useEffect)((function(){n("forgot")}),[n,a]);var s=function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.forgotPassword(o.username);case 3:l(Object(d.a)(Object(d.a)({},o),{},{stage:1})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l(Object(d.a)(Object(d.a)({},o),{},{error:e.t0}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),m=function(){l(Object(d.a)(Object(d.a)({},o),{},{stage:2}))},f=function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o.password!==o.confirmPassword){e.next=7;break}return e.next=4,y.a.forgotPasswordSubmit(o.username,o.validation,o.password);case 4:l(Object(d.a)(Object(d.a)({},o),{},{stage:3,error:{name:"Empty"}})),e.next=8;break;case 7:l(Object(d.a)(Object(d.a)({},o),{},{error:{name:"PasswordNotMatch",message:"Passwords don't Match"}}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l(Object(d.a)(Object(d.a)({},o),{},{error:e.t0}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),h=function(e){l(Object(d.a)(Object(d.a)({},o),{},Object(D.a)({},e.target.name,e.target.value)))};return i.a.createElement("div",null,i.a.createElement("h1",null,"\u0417\u0430\u0431\u0440\u0430\u0432\u0435\u043d\u0430 \u041f\u0430\u0440\u043e\u043b\u0430"),o.error&&i.a.createElement(J,{errorMessage:o.error}),0===o.stage&&i.a.createElement("div",{style:W.formContainer},i.a.createElement(I.a,{onChange:h,placeholder:"username",name:"username",value:o.username,style:W.Input}),i.a.createElement("div",{role:"button",tabIndex:0,style:W.button,onClick:s,onKeyDown:s},i.a.createElement("span",{style:W.buttonText},"\u041d\u0430\u043f\u0440\u0435\u0434"))),1===o.stage&&i.a.createElement("div",null,i.a.createElement("div",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u0438 E-mail-a \u0441\u0438 \u0437\u0430 \u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u0449 \u043a\u043e\u0434"),i.a.createElement(I.a,{onChange:h,placeholder:"\u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u0449 \u043a\u043e\u0434",name:"validation",value:o.validation,style:W.Input}),i.a.createElement("div",{role:"button",tabIndex:0,style:W.button,onClick:m,onKeyDown:m},i.a.createElement("span",{style:W.buttonText},"\u041e\u041a"))),2===o.stage&&i.a.createElement("div",null,i.a.createElement(I.a,{type:"password",onChange:h,placeholder:"\u043d\u043e\u0432\u0430 \u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:o.password,style:W.Input}),i.a.createElement("br",null),i.a.createElement(I.a,{type:"password",onChange:h,placeholder:"\u043f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430",name:"confirmPassword",value:o.confirmPassword,style:W.Input}),i.a.createElement("div",{role:"button",tabIndex:0,href:"/",style:W.button,onClick:f,onKeyDown:f},i.a.createElement("span",{style:W.buttonText},"\u0421\u043c\u0435\u043d\u0438 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430"))),3===o.stage&&i.a.createElement(i.a.Fragment,null,i.a.createElement(i.a.Fragment,null,"\u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0441\u043c\u0435\u043d\u0435\u043d\u0430,",i.a.createElement("a",{href:"/app/login"},"\u0412\u0445\u043e\u0434"))))},H=a(63),X=a(90),Y=a(28),Z=a(542),$=a(537),ee=a(277),te=a.n(ee),ae=a(278),ne=a.n(ae),re=a(279),ce=a.n(re),oe=a(288),le=function(e){var t=e.user,a=e.username,n=Object(u.useState)(!1),r=Object(E.a)(n,2),c=r[0],o=r[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(oe.a,{type:"primary",shape:"round",style:{float:"right"},onClick:function(){return alert(a),o(!c),void Q("Follow",{following_id:a},t.token)},disabled:c},"\u0421\u043b\u0435\u0434\u0432\u0430\u0439!"))},ue=ce()(ne.a),ie=Z.a.Meta,se=I.a.Search,me=function(e){var t=e.item,a=e.user,n=e.showfollow,r=Object(u.useState)(t.comment||[]),c=Object(E.a)(r,2),o=c[0],l=c[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Z.a,{style:{marginBottom:5}},i.a.createElement(ie,{title:i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{href:"/".concat(t.user_id)},"@".concat(t.user_id)," "),i.a.createElement("small",null,i.a.createElement(te.a,{date:t.created_at,formatter:ue})),n&&i.a.createElement(le,{user:a,username:t.user_id})),description:t.tweet}),o[0]&&o.map((function(e){return i.a.createElement($.a,{key:e.id,author:e.user_id,content:i.a.createElement("p",null,e.comment)})})),a&&i.a.createElement(se,{placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",enterButton:"\u0427\u0443\u0440\u0443\u043b\u0438\u043a",size:"medium",onSearch:function(e){var n={comment:e};l([].concat(Object(Y.a)(o),[n])),Q("Comment",{post_id:t.id,comment:e},a.token)}})))},pe=function(){var e=Object(p.useRecoilState)(N),t=Object(E.a)(e,2),a=t[0],r=t[1];Object(u.useEffect)((function(){r("home")}),[r,a]);var c=Object(x.useQuery)(Object(X.a)(n||(n=Object(H.a)(["\n    {\n      Tweet(order_by: { id: desc }, limit: 10) {\n        user_id\n        tweet\n        created_at\n        id\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n    }\n  "])))),o=c.data,l=c.loading,s=c.error;return l?"Loading...":s?"Error! ".concat(s.message):i.a.createElement(i.a.Fragment,null,o.Tweet.map((function(e){return i.a.createElement("a",{href:"/".concat(e.id),key:e.id},i.a.createElement(me,{item:e}))})))},de=function(e){var t=e.user,a=Object(w.g)().id,n=Object(x.useQuery)(Object(X.a)(r||(r=Object(H.a)(['\n    {\n      Tweet(where: { user_id: { _eq: "','" } }, order_by: { id: desc },limit:100) {\n        tweet\n        created_at\n        id\n        user_id\n      }\n    }\n  '])),a)),c=n.data,o=n.loading,l=n.error;return o?"Loading...":l?"Error! ".concat(l.message):i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,a),c.Tweet[0]?c.Tweet.map((function(e){return i.a.createElement(me,{key:e.id,item:e,user:t})})):i.a.createElement(i.a.Fragment,null,"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430"))},fe=function(e){var t=e.user,a=Object(w.g)().id,n=Object(x.useQuery)(Object(X.a)(c||(c=Object(H.a)(['\n    {\n      Tweet(where: { id: { _eq: "','" } }, order_by: { id: desc },limit:1) {\n        tweet\n        created_at\n        id\n        user_id\n      }\n    }\n  '])),a)),r=n.data,o=n.loading,l=n.error;return o?"Loading...":l?"Error! ".concat(l.message):i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,a),r.Tweet[0]?r.Tweet.map((function(e){return i.a.createElement(me,{key:e.id,item:e,user:t})})):i.a.createElement(i.a.Fragment,null,"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430"))},be=a(540),ge=a(173),Ee=function(e){var t=e.user,a=e.following,n=Object(x.useQuery)(Object(X.a)(o||(o=Object(H.a)(["\n    {\n      Tweet(where: {}, order_by: { id: desc }, limit: 100) {\n        id\n        user_id\n        tweet\n        created_at\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n    }\n  "])))),r=n.data,c=n.loading,l=n.error;return c?"Loading...":l?"Error! ".concat(l.message):i.a.createElement(i.a.Fragment,null,r.Tweet.map((function(e){return i.a.createElement(me,{key:e.id,item:e,user:t,showfollow:![].concat(Object(Y.a)(a),[t.username]).includes(e.user_id)})})))},he=function(e){var t=e.user,a=Object(u.useState)([]),n=Object(E.a)(a,2),r=n[0],c=n[1],o=Object(ge.b)(),s=o.control,m=o.errors,p=o.handleSubmit,d=o.setValue,f=function(){var e=Object(g.a)(b.a.mark((function e(a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.tweet,d("tweet",""),Q("Tweet",{tweet:n,created_at:new Date},t.token),c([].concat(Object(Y.a)(r),[{tweet:n,id:(new Date).getTime().toString(),user_id:t.username}]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=Object(x.useQuery)(Object(X.a)(l||(l=Object(H.a)(['\n    {\n        Tweet(where: {wall: {user_id: {_eq: "','"}}}, order_by: {created_at: desc}, limit: 100) {\n        id\n        user_id\n        created_at\n        tweet\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n      myWall: Tweet(order_by: {created_at: desc}, where: {user_id: {_eq: "','"}}, limit: 100) {\n        id\n        user_id\n        created_at\n        tweet\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n      Follow(where: {user_id: {_eq: "','"}}) {\n        following_id\n      }\n    }\n  '])),t.username,t.username,t.username)),w=h.data,v=h.loading,j=h.error;return v?"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043c...":j?"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043c...".concat(j):i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:p(f)},i.a.createElement(ge.a,{as:i.a.createElement(be.a,{id:"outlined-basic",error:!!m.tweet,label:(m.tweet,"\u043a\u0430\u043a\u0432\u043e \u043c\u0438\u0441\u043b\u0438\u0442\u0435 ".concat(t.username,"?")),variant:"outlined",style:{width:"80%"}}),defaultValue:"",name:"tweet",control:s,rules:{required:!0}}),i.a.createElement(oe.a,{type:"primary",htmlType:"submit",style:{width:"20%",height:56}},"\u0427\u0443\u0440\u0443\u043b\u0438\u043a!")),w.Tweet[0]&&i.a.createElement("h1",null,"\u0421\u0442\u0435\u043d\u0430"),r.map((function(e){return i.a.createElement(me,{key:e.id,item:e,user:t})})),[].concat(Object(Y.a)(w.Tweet),Object(Y.a)(w.myWall)).sort((function(e,t){return e.id-t.id})).reverse().map((function(e){return i.a.createElement(me,{key:e.id,item:e,user:t})})),i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0438"),i.a.createElement(Ee,{user:t,following:w.Follow.map((function(e){return e.following_id}))})))};var we=new k.a({uri:"http://twitter1.prismic.io/graphql"});O.a.configure({aws_project_region:"eu-west-1",aws_cognito_identity_pool_id:"eu-west-1:3f5f916d-2252-487f-99c0-7aa69115f973",aws_cognito_region:"eu-west-1",aws_user_pools_id:"eu-west-1_T6v05tjzh",aws_user_pools_web_client_id:"eqlretnsetkj5p57bqtandjqa",oauth:{}});var ve=function(){var e=Object(p.useRecoilState)(F),t=Object(E.a)(e,2),a=t[0],n=t[1],r=Object(p.useRecoilValue)(N),c=function(e,t){var a=Object(u.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),n=Object(E.a)(a,2),r=n[0],c=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]}("theme",!1),o=Object(E.a)(c,2),l=o[0],s=o[1],m=new _.a({link:we,cache:new C.a}),f=function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.signOut();case 2:localStorage.setItem("user",JSON.stringify({})),n({});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useCallback)((function(){var e=localStorage.getItem("user"),t=e?JSON.parse(e):{};n(t)}),[n]),Object(u.useCallback)((function(){var e=function(){var e=Object(g.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=12;break}return e.next=3,B(a.token);case 3:if("TokenExpiredError"!==e.sent.data.name){e.next=12;break}return e.next=7,y.a.currentAuthenticatedUser();case 7:return t=e.sent,e.next=10,y.a.currentSession();case 10:r=e.sent,t.refreshSession(r.refreshToken,(function(e,t){var r=Object(d.a)(Object(d.a)({},a),{},{token:t.accessToken.jwtToken});n(r),localStorage.setItem("user",JSON.stringify(r))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(Object(g.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)}))),2e4);return function(){return clearInterval(t)}}),[a,n]),i.a.createElement(x.ApolloProvider,{client:m},i.a.createElement(h.a,null,i.a.createElement("div",{className:l?"dark":"white"},i.a.createElement("div",{className:"logo"},i.a.createElement("img",{src:"/logo.png",alt:""})),i.a.createElement(v.a,{selectedKeys:[r],mode:"horizontal"},i.a.createElement(v.a.Item,{key:"home"},i.a.createElement(h.b,{to:"/"},"\u041d\u0430\u0447\u0430\u043b\u043e")),a.username?i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a.Item,{key:"logout"},i.a.createElement(h.b,{to:"/",onClick:function(){return f()}},"\u0418\u0437\u0445\u043e\u0434")),i.a.createElement(v.a.Item,{key:"profile"},i.a.createElement(h.b,{to:"/app/profile"},"\u041f\u0440\u043e\u0444\u0438\u043b"))):i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a.Item,{key:"login"},i.a.createElement(h.b,{to:"/app/login"},"\u0412\u0445\u043e\u0434")),i.a.createElement(v.a.Item,{key:"signup"},i.a.createElement(h.b,{to:"/app/signup"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),i.a.createElement(v.a.Item,{key:"forgot"},i.a.createElement(h.b,{to:"/app/forgot"},"\u0417\u0430\u0431\u0440. \u041f\u0430\u0440\u043e\u043b\u0430")))),i.a.createElement("div",{className:"switcher"},i.a.createElement(j.a,{defaultChecked:l,onChange:function(){return s(!l)}})),i.a.createElement(T,null,i.a.createElement(w.d,null,i.a.createElement(w.b,{path:"/app/login"},a.username?i.a.createElement(w.a,{to:"/"}):i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",null,"\u0412\u0445\u043e\u0434"),i.a.createElement(A,{type:"full"}))),i.a.createElement(w.b,{path:"/app/forgot"},i.a.createElement(G,null)),i.a.createElement(w.b,{path:"/app/signup"},i.a.createElement(V,null)),i.a.createElement(w.b,{path:"/user/:id"},a.username?i.a.createElement(de,{user:a}):i.a.createElement(de,null)),i.a.createElement(w.b,{path:"/:id"},i.a.createElement(fe,{user:a})),i.a.createElement(w.b,{path:"/"},a.username?i.a.createElement(he,{user:a}):i.a.createElement(pe,{menu:"home"})))))))};m.a.render(i.a.createElement(p.RecoilRoot,null,i.a.createElement(ve,null)),document.getElementById("root"))}},[[311,1,2]]]);
//# sourceMappingURL=main.43ba4a3e.chunk.js.map