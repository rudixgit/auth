(this.webpackJsonpauth=this.webpackJsonpauth||[]).push([[0],{213:function(e,t,a){e.exports=a(294)},244:function(e,t,a){},294:function(e,t,a){"use strict";a.r(t);var n,r,c,o,l=a(0),u=a.n(l),s=a(22),i=a.n(s),m=a(37),p=a(21),d=a(12),f=a.n(d),b=a(23),g=a(19),E=a(78),h=a(34),w=a(334),v=a(338),j=a(134),O=a(332),y=a(64),x=a(337),k=a(328),_=a(336),C=a(182),S=(a(243),a(244),function(e){var t=e.children;return u.a.createElement(u.a.Fragment,null,u.a.createElement(C.a,{title:"churulik",meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]},u.a.createElement("html",{lang:"en"})),u.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},t))}),I=a(335),T=Object(m.atom)({key:"loggedInUser",default:{sub:null,email_verified:null,phone_number_verified:null,email:null,username:null,token:null}}),F=Object(m.atom)({key:"navigation",default:"home"}),N=(Object(m.atom)({key:"items",default:{rows:[]}}),Object(m.atom)({key:"modal",default:!1}),a(333)),P={UserNotFoundException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430",AuthError:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b \u0438 \u043f\u0430\u0440\u043e\u043b\u0430 \u043d\u0435 \u043c\u043e\u0433\u0430\u0442 \u0434\u0430 \u0431\u044a\u0434\u0430\u0442 \u043f\u0440\u0430\u0437\u043d\u0438",CodeMismatchException:"\u043d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u043a\u043e\u0434, \u043c\u043e\u043b\u044f \u043f\u0440\u043e\u0431\u0432\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e",NotAuthorizedException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0430 \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0438",UsernameExistsException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430",PasswordNotMatch:"\u043f\u0430\u0440\u043e\u043b\u0438\u0442\u0435 \u043d\u0435 \u043f\u0430\u0441\u0432\u0430\u0442",InvalidParameterException:"\u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u043f\u043e\u043d\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0430",Empty:""},J=function(e){return u.a.createElement("div",null,Object.entries(e).map((function(e){var t=Object(g.a)(e,2),a=(t[0],t[1]);return"Empty"!==a.name&&u.a.createElement(N.a,{description:P[a.name]?P[a.name]:"".concat(a.message,"-").concat(a.name),type:"error"})})))},M={Input:{height:40,margin:"10px 0px",padding:7,width:"100%"},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},q=function(e){var t=e.type,a=Object(m.useRecoilState)(T),n=Object(g.a)(a,2),r=n[0],c=n[1],o=Object(l.useState)(""),s=Object(g.a)(o,2),i=s[0],d=s[1],E=Object(l.useState)(""),h=Object(g.a)(E,2),w=h[0],v=h[1],j=Object(l.useState)(null),y=Object(g.a)(j,2),x=y[0],k=y[1],_=Object(m.useRecoilState)(F),C=Object(g.a)(_,2),S=C[0],N=C[1];Object(l.useEffect)((function(){N("login")}),[N,S]);var P=function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.signIn(i,w);case 3:return e.next=5,O.a.currentAuthenticatedUser();case 5:return t=e.sent,e.next=8,O.a.currentSession();case 8:a=e.sent,n=Object(p.a)(Object(p.a)({},t.attributes),{},{username:t.username,token:a.accessToken.jwtToken,refreshtoken:a.refreshToken.token}),c(n),localStorage.setItem("user",JSON.stringify(n)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),k(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(u.a.Fragment,null,r.x&&u.a.createElement(J,{errorMessage:x}),x&&u.a.createElement(J,{errorMessage:x}),"compact"===t&&u.a.createElement(u.a.Fragment,null,u.a.createElement(I.a,{onChange:function(e){return d(e.target.value)},placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:i,style:M.InputCompact}),u.a.createElement(I.a,{onChange:function(e){return v(e.target.value)},placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:w,type:"password",style:M.InputCompact}),u.a.createElement("div",{style:M.buttonCompact,onClick:P},u.a.createElement("span",{style:M.buttonCompact},"\u0412\u0445\u043e\u0434"))),"full"===t&&u.a.createElement(u.a.Fragment,null,u.a.createElement(I.a,{onChange:function(e){return d(e.target.value)},placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:i,style:M.Input}),u.a.createElement(I.a,{onChange:function(e){return v(e.target.value)},placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:w,type:"password",style:M.Input}),u.a.createElement("div",{style:M.button,onClick:P},u.a.createElement("span",{style:M.buttonText},"\u0412\u0445\u043e\u0434"))))},A=a(47),D=a(81),R=a.n(D),z={api:"https://crlzp2fwh8.execute-api.eu-west-1.amazonaws.com/dev"},U=function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(z.api,"/heartbeat"),{headers:{accesstoken:t,"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",new Promise((function(e){e(a)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("".concat(z.api,"/db/").concat(t),JSON.stringify(a),{headers:{accesstoken:n,"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",new Promise((function(e){e(r)})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("".concat(z.api,"/register"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",new Promise((function(e){e(a)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q={Input:{height:40,margin:"10px 0px",padding:7},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},L=function(){var e=Object(m.useRecoilState)(F),t=Object(g.a)(e,2),a=t[0],n=t[1],r=Object(l.useState)({username:"",password:"",email:"",authCode:"",stage:0,error:""}),c=Object(g.a)(r,2),o=c[0],s=c[1];Object(l.useEffect)((function(){n("signup")}),[n,a]);var i=function(e){s(Object(p.a)(Object(p.a)({},o),{},Object(A.a)({},e.target.name,e.target.value)))},d=function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.username,a=o.password,n=o.email,e.prev=1,e.next=4,O.a.signUp({username:t,password:a,attributes:{email:n}});case 4:s(Object(p.a)(Object(p.a)({},o),{},{stage:1,error:{name:"Empty"}})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),s(Object(p.a)(Object(p.a)({},o),{},{error:e.t0})),console.log("error signing up...",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.username,a=o.authCode,n=o.email,e.prev=1,e.next=4,O.a.confirmSignUp(t,a);case 4:return e.next=6,K({username:t,email:n,tip:"usersauth",vreme:(new Date).getTime()});case 6:s(Object(p.a)(Object(p.a)({},o),{},{stage:2,error:{name:"Empty"}})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),s(Object(p.a)(Object(p.a)({},o),{},{error:e.t0})),console.log("error confirming signing up...",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("div",null,0===o.stage&&u.a.createElement("div",{style:Q.formContainer},u.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.error&&u.a.createElement(J,{errorMessage:o.error}),u.a.createElement(I.a,{onChange:i,placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:o.username,style:Q.Input}),u.a.createElement(I.a,{onChange:i,placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:o.password,type:"password",style:Q.Input}),u.a.createElement(I.a,{onChange:i,placeholder:"Email",name:"email",value:o.email,style:Q.Input}),u.a.createElement("div",{style:Q.button,onClick:d},u.a.createElement("span",{style:Q.buttonText},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),1===o.stage&&u.a.createElement("div",{style:Q.formContainer},u.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),o.error&&u.a.createElement(J,{errorMessage:o.error}),u.a.createElement(I.a,{onChange:i,placeholder:"Authorization Code",name:"authCode",value:o.authCode,style:Q.Input}),u.a.createElement("div",{style:Q.button,onClick:E},u.a.createElement("span",{style:Q.buttonText},"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),2===o.stage&&u.a.createElement(u.a.Fragment,null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430 ,",u.a.createElement("a",{href:"/app/login"},"\u0412\u0445\u043e\u0434")))},V={Input:{height:40,margin:"10px 0px",padding:7,width:"100%"},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},W=function(){var e=Object(m.useRecoilState)(F),t=Object(g.a)(e,2),a=t[0],n=t[1],r=Object(l.useState)({username:"",error:"",validation:"",password:"",confirmPassword:"",stage:0}),c=Object(g.a)(r,2),o=c[0],s=c[1];Object(l.useEffect)((function(){n("forgot")}),[n,a]);var i=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.forgotPassword(o.username);case 3:s(Object(p.a)(Object(p.a)({},o),{},{stage:1})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),s(Object(p.a)(Object(p.a)({},o),{},{error:e.t0}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),d=function(){s(Object(p.a)(Object(p.a)({},o),{},{stage:2}))},E=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o.password!==o.confirmPassword){e.next=7;break}return e.next=4,O.a.forgotPasswordSubmit(o.username,o.validation,o.password);case 4:s(Object(p.a)(Object(p.a)({},o),{},{stage:3,error:{name:"Empty"}})),e.next=8;break;case 7:s(Object(p.a)(Object(p.a)({},o),{},{error:{name:"PasswordNotMatch",message:"Passwords don't Match"}}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),s(Object(p.a)(Object(p.a)({},o),{},{error:e.t0}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),h=function(e){s(Object(p.a)(Object(p.a)({},o),{},Object(A.a)({},e.target.name,e.target.value)))};return u.a.createElement("div",null,u.a.createElement("h1",null,"\u0417\u0430\u0431\u0440\u0430\u0432\u0435\u043d\u0430 \u041f\u0430\u0440\u043e\u043b\u0430"),o.error&&u.a.createElement(J,{errorMessage:o.error}),0===o.stage&&u.a.createElement("div",{style:V.formContainer},u.a.createElement(I.a,{onChange:h,placeholder:"username",name:"username",value:o.username,style:V.Input}),u.a.createElement("div",{role:"button",tabIndex:0,style:V.button,onClick:i,onKeyDown:i},u.a.createElement("span",{style:V.buttonText},"\u041d\u0430\u043f\u0440\u0435\u0434"))),1===o.stage&&u.a.createElement("div",null,u.a.createElement("div",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u0438 E-mail-a \u0441\u0438 \u0437\u0430 \u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u0449 \u043a\u043e\u0434"),u.a.createElement(I.a,{onChange:h,placeholder:"\u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u0449 \u043a\u043e\u0434",name:"validation",value:o.validation,style:V.Input}),u.a.createElement("div",{role:"button",tabIndex:0,style:V.button,onClick:d,onKeyDown:d},u.a.createElement("span",{style:V.buttonText},"\u041e\u041a"))),2===o.stage&&u.a.createElement("div",null,u.a.createElement(I.a,{type:"password",onChange:h,placeholder:"\u043d\u043e\u0432\u0430 \u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:o.password,style:V.Input}),u.a.createElement("br",null),u.a.createElement(I.a,{type:"password",onChange:h,placeholder:"\u043f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430",name:"confirmPassword",value:o.confirmPassword,style:V.Input}),u.a.createElement("div",{role:"button",tabIndex:0,href:"/",style:V.button,onClick:E,onKeyDown:E},u.a.createElement("span",{style:V.buttonText},"\u0421\u043c\u0435\u043d\u0438 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430"))),3===o.stage&&u.a.createElement(u.a.Fragment,null,u.a.createElement(u.a.Fragment,null,"\u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0441\u043c\u0435\u043d\u0435\u043d\u0430,",u.a.createElement("a",{href:"/app/login"},"\u0412\u0445\u043e\u0434"))))},G=a(80),H=a(95),X=a(31),Y=a(331),Z=a(327),$=a(196),ee=a.n($),te=a(197),ae=a.n(te),ne=a(198),re=a.n(ne),ce=a(206),oe=function(e){var t=e.user,a=e.username,n=Object(l.useState)(!1),r=Object(g.a)(n,2),c=r[0],o=r[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(ce.a,{type:"primary",shape:"round",style:{float:"right"},onClick:function(){return alert(a),o(!c),void B("Follow",{following_id:a},t.token)},disabled:c},"\u0421\u043b\u0435\u0434\u0432\u0430\u0439!"))},le=re()(ae.a),ue=Y.a.Meta,se=I.a.Search,ie=function(e){var t=e.item,a=e.user,n=e.showfollow,r=Object(l.useState)(t.comment||[]),c=Object(g.a)(r,2),o=c[0],s=c[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement(Y.a,{style:{marginBottom:5}},u.a.createElement(ue,{title:u.a.createElement(u.a.Fragment,null,u.a.createElement("a",{href:"/".concat(t.user_id)},"@".concat(t.user_id)," "),u.a.createElement("small",null,u.a.createElement(ee.a,{date:t.created_at,formatter:le})),n&&u.a.createElement(oe,{user:a,username:t.user_id})),description:t.tweet}),o[0]&&o.map((function(e){return u.a.createElement(Z.a,{key:e.id,author:e.user_id,content:u.a.createElement("p",null,e.comment)})})),a&&u.a.createElement(se,{placeholder:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440",enterButton:"\u0427\u0443\u0440\u0443\u043b\u0438\u043a",size:"medium",onSearch:function(e){var n={comment:e};s([].concat(Object(X.a)(o),[n])),B("Comment",{post_id:t.id,comment:e},a.token)}})))},me=function(){var e=Object(m.useRecoilState)(F),t=Object(g.a)(e,2),a=t[0],r=t[1];Object(l.useEffect)((function(){r("home")}),[r,a]);var c=Object(y.useQuery)(Object(H.a)(n||(n=Object(G.a)(["\n    {\n      Tweet(order_by: { id: desc }, limit: 10) {\n        user_id\n        tweet\n        created_at\n        id\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n    }\n  "])))),o=c.data,s=c.loading,i=c.error;return s?"Loading...":i?"Error! ".concat(i.message):u.a.createElement(u.a.Fragment,null,o.Tweet.map((function(e){return u.a.createElement(ie,{key:e.id,item:e})})))},pe=function(e){var t=e.user,a=Object(h.g)().id,n=Object(y.useQuery)(Object(H.a)(r||(r=Object(G.a)(['\n    {\n      Tweet(where: { user_id: { _eq: "','" } }, order_by: { id: desc },limit:100) {\n        tweet\n        created_at\n        id\n        user_id\n      }\n    }\n  '])),a)),c=n.data,o=n.loading,l=n.error;return o?"Loading...":l?"Error! ".concat(l.message):u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",null,a),c.Tweet[0]?c.Tweet.map((function(e){return u.a.createElement(ie,{key:e.id,item:e,user:t})})):u.a.createElement(u.a.Fragment,null,"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430"))},de=a(330),fe=a(140),be=function(e){var t=e.user,a=e.following,n=Object(y.useQuery)(Object(H.a)(c||(c=Object(G.a)(["\n    {\n      Tweet(where: {}, order_by: { id: desc }, limit: 100) {\n        id\n        user_id\n        tweet\n        created_at\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n    }\n  "])))),r=n.data,o=n.loading,l=n.error;return o?"Loading...":l?"Error! ".concat(l.message):u.a.createElement(u.a.Fragment,null,r.Tweet.map((function(e){return u.a.createElement(ie,{key:e.id,item:e,user:t,showfollow:![].concat(Object(X.a)(a),[t.username]).includes(e.user_id)})})))},ge=function(e){var t=e.user,a=Object(l.useState)([]),n=Object(g.a)(a,2),r=n[0],c=n[1],s=Object(fe.b)(),i=s.control,m=s.errors,p=s.handleSubmit,d=s.setValue,E=function(){var e=Object(b.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.tweet,d("tweet",""),B("Tweet",{tweet:n,created_at:new Date},t.token),c([].concat(Object(X.a)(r),[{tweet:n,id:(new Date).getTime().toString(),user_id:t.username}]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=Object(y.useQuery)(Object(H.a)(o||(o=Object(G.a)(['\n    {\n        Tweet(where: {wall: {user_id: {_eq: "','"}}}, order_by: {created_at: desc}, limit: 100) {\n        id\n        user_id\n        created_at\n        tweet\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n      myWall: Tweet(order_by: {created_at: desc}, where: {user_id: {_eq: "','"}}, limit: 100) {\n        id\n        user_id\n        created_at\n        tweet\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n      Follow(where: {user_id: {_eq: "','"}}) {\n        following_id\n      }\n    }\n  '])),t.username,t.username,t.username)),w=h.data,v=h.loading,j=h.error;return v?"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043c...":j?"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043c...".concat(j):u.a.createElement(u.a.Fragment,null,u.a.createElement("form",{onSubmit:p(E)},u.a.createElement(fe.a,{as:u.a.createElement(de.a,{id:"outlined-basic",error:!!m.tweet,label:(m.tweet,"\u043a\u0430\u043a\u0432\u043e \u043c\u0438\u0441\u043b\u0438\u0442\u0435 ".concat(t.username,"?")),variant:"outlined",style:{width:"80%"}}),defaultValue:"",name:"tweet",control:i,rules:{required:!0}}),u.a.createElement(ce.a,{type:"primary",htmlType:"submit",style:{width:"20%",height:56}},"\u0427\u0443\u0440\u0443\u043b\u0438\u043a!")),w.Tweet[0]&&u.a.createElement("h1",null,"\u0421\u0442\u0435\u043d\u0430"),r.map((function(e){return u.a.createElement(ie,{key:e.id,item:e,user:t})})),[].concat(Object(X.a)(w.Tweet),Object(X.a)(w.myWall)).sort((function(e,t){return e.id-t.id})).reverse().map((function(e){return u.a.createElement(ie,{key:e.id,item:e,user:t})})),u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",null,"\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0438"),u.a.createElement(be,{user:t,following:w.Follow.map((function(e){return e.following_id}))})))};var Ee=new x.a({uri:"https://hasuradbone.herokuapp.com/v1/graphql"});j.a.configure({aws_project_region:"eu-west-1",aws_cognito_identity_pool_id:"eu-west-1:3f5f916d-2252-487f-99c0-7aa69115f973",aws_cognito_region:"eu-west-1",aws_user_pools_id:"eu-west-1_T6v05tjzh",aws_user_pools_web_client_id:"eqlretnsetkj5p57bqtandjqa",oauth:{}});var he=function(){var e=Object(m.useRecoilState)(T),t=Object(g.a)(e,2),a=t[0],n=t[1],r=Object(m.useRecoilValue)(F),c=function(e,t){var a=Object(l.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),n=Object(g.a)(a,2),r=n[0],c=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]}("theme",!1),o=Object(g.a)(c,2),s=o[0],i=o[1],d=new k.a({link:Ee,cache:new _.a}),j=function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.signOut();case 2:localStorage.setItem("user",JSON.stringify({})),n({});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){var e=localStorage.getItem("user"),t=e?JSON.parse(e):{};n(t)}),[n]),Object(l.useEffect)((function(){var e=function(){var e=Object(b.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=12;break}return e.next=3,U(a.token);case 3:if("TokenExpiredError"!==e.sent.data.name){e.next=12;break}return e.next=7,O.a.currentAuthenticatedUser();case 7:return t=e.sent,e.next=10,O.a.currentSession();case 10:r=e.sent,t.refreshSession(r.refreshToken,(function(e,t){var r=Object(p.a)(Object(p.a)({},a),{},{token:t.accessToken.jwtToken});n(r),localStorage.setItem("user",JSON.stringify(r))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)}))),2e4);return function(){return clearInterval(t)}}),[a,n]),u.a.createElement(y.ApolloProvider,{client:d},u.a.createElement(E.a,null,u.a.createElement("div",{className:s?"dark":"white"},u.a.createElement("div",{className:"logo"},u.a.createElement("img",{src:"/logo.png",alt:""})),u.a.createElement(w.a,{selectedKeys:[r],mode:"horizontal"},u.a.createElement(w.a.Item,{key:"home"},u.a.createElement(E.b,{to:"/"},"\u041d\u0430\u0447\u0430\u043b\u043e")),a.username?u.a.createElement(u.a.Fragment,null,u.a.createElement(w.a.Item,{key:"logout"},u.a.createElement(E.b,{to:"/",onClick:function(){return j()}},"\u0418\u0437\u0445\u043e\u0434")),u.a.createElement(w.a.Item,{key:"profile"},u.a.createElement(E.b,{to:"/app/profile"},"\u041f\u0440\u043e\u0444\u0438\u043b"))):u.a.createElement(u.a.Fragment,null,u.a.createElement(w.a.Item,{key:"login"},u.a.createElement(E.b,{to:"/app/login"},"\u0412\u0445\u043e\u0434")),u.a.createElement(w.a.Item,{key:"signup"},u.a.createElement(E.b,{to:"/app/signup"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),u.a.createElement(w.a.Item,{key:"forgot"},u.a.createElement(E.b,{to:"/app/forgot"},"\u0417\u0430\u0431\u0440. \u041f\u0430\u0440\u043e\u043b\u0430")))),u.a.createElement("div",{className:"switcher"},u.a.createElement(v.a,{defaultChecked:s,onChange:function(){return i(!s)}})),u.a.createElement(S,null,u.a.createElement(h.d,null,u.a.createElement(h.b,{path:"/app/login"},a.username?u.a.createElement(h.a,{to:"/"}):u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",null,"\u0412\u0445\u043e\u0434"),u.a.createElement(q,{type:"full"}))),u.a.createElement(h.b,{path:"/app/forgot"},u.a.createElement(W,null)),u.a.createElement(h.b,{path:"/app/signup"},u.a.createElement(L,null)),u.a.createElement(h.b,{path:"/:id"},a.username?u.a.createElement(pe,{user:a}):u.a.createElement(pe,null)),u.a.createElement(h.b,{path:"/"},a.username?u.a.createElement(ge,{user:a}):u.a.createElement(me,{menu:"home"})))))))};i.a.render(u.a.createElement(m.RecoilRoot,null,u.a.createElement(he,null)),document.getElementById("root"))}},[[213,1,2]]]);
//# sourceMappingURL=main.51c44a60.chunk.js.map