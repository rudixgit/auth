(this.webpackJsonpauth=this.webpackJsonpauth||[]).push([[0],{352:function(e,t,a){e.exports=a(571)},383:function(e,t,a){},418:function(e,t){},420:function(e,t){},430:function(e,t){},432:function(e,t){},459:function(e,t){},461:function(e,t){},462:function(e,t){},467:function(e,t){},469:function(e,t){},488:function(e,t){},500:function(e,t){},503:function(e,t){},571:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=a(42),u=a(20),s=a(14),i=a.n(s),m=a(21),p=a(19),d=a(101),f=a(40),b=a(612),g=a(615),E=a(200),h=a(610),v=a(83),w=a(158),O=a(156),j=a(136),y=a(307),x=(a(382),a(383),function(e){var t=e.children;e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{title:"title",meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]},r.a.createElement("html",{lang:"en"})),r.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},t))}),k=a(613),_=Object(l.atom)({key:"loggedInUser",default:{sub:null,email_verified:null,phone_number_verified:null,email:null,username:null,token:null}}),C=Object(l.atom)({key:"navigation",default:"home"}),S=(Object(l.atom)({key:"items",default:{rows:[]}}),Object(l.atom)({key:"modal",default:!1}),a(614)),I={UserNotFoundException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430",AuthError:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b \u0438 \u043f\u0430\u0440\u043e\u043b\u0430 \u043d\u0435 \u043c\u043e\u0433\u0430\u0442 \u0434\u0430 \u0431\u044a\u0434\u0430\u0442 \u043f\u0440\u0430\u0437\u043d\u0438",CodeMismatchException:"\u043d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d \u043a\u043e\u0434, \u043c\u043e\u043b\u044f \u043f\u0440\u043e\u0431\u0432\u0430\u0439\u0442\u0435 \u043e\u0442\u043d\u043e\u0432\u043e",NotAuthorizedException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0430 \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0438",UsernameExistsException:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430",PasswordNotMatch:"\u043f\u0430\u0440\u043e\u043b\u0438\u0442\u0435 \u043d\u0435 \u043f\u0430\u0441\u0432\u0430\u0442",InvalidParameterException:"\u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u043f\u043e\u043d\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u0430",Empty:""},T=function(e){return r.a.createElement("div",null,Object.entries(e).map((function(e){var t=Object(p.a)(e,2),a=(t[0],t[1]);return"Empty"!==a.name&&r.a.createElement(S.a,{description:I[a.name]?I[a.name]:"".concat(a.message,"-").concat(a.name),type:"error"})})))},F={Input:{height:40,margin:"10px 0px",padding:7,width:"100%"},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},N=function(e){var t=e.type,a=Object(l.useRecoilState)(_),c=Object(p.a)(a,2),o=c[0],s=c[1],d=Object(n.useState)(""),f=Object(p.a)(d,2),b=f[0],g=f[1],E=Object(n.useState)(""),v=Object(p.a)(E,2),w=v[0],O=v[1],j=Object(n.useState)(null),y=Object(p.a)(j,2),x=y[0],S=y[1],I=Object(l.useRecoilState)(C),N=Object(p.a)(I,2),P=N[0],J=N[1];Object(n.useEffect)((function(){J("login")}),[J,P]);var M=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.signIn(b,w);case 3:return e.next=5,h.a.currentAuthenticatedUser();case 5:return t=e.sent,e.next=8,h.a.currentSession();case 8:a=e.sent,n=Object(u.a)(Object(u.a)({},t.attributes),{},{username:t.username,token:a.accessToken.jwtToken,refreshtoken:a.refreshToken.token}),s(n),localStorage.setItem("user",JSON.stringify(n)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),S(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,o.x&&r.a.createElement(T,{errorMessage:x}),x&&r.a.createElement(T,{errorMessage:x}),"compact"===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{onChange:function(e){return g(e.target.value)},placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:b,style:F.InputCompact}),r.a.createElement(k.a,{onChange:function(e){return O(e.target.value)},placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:w,type:"password",style:F.InputCompact}),r.a.createElement("div",{style:F.buttonCompact,onClick:M},r.a.createElement("span",{style:F.buttonCompact},"\u0412\u0445\u043e\u0434"))),"full"===t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{onChange:function(e){return g(e.target.value)},placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:b,style:F.Input}),r.a.createElement(k.a,{onChange:function(e){return O(e.target.value)},placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:w,type:"password",style:F.Input}),r.a.createElement("div",{style:F.button,onClick:M},r.a.createElement("span",{style:F.buttonText},"\u0412\u0445\u043e\u0434"))))},P=a(55),J=a(102),M=a.n(J),R={api:"https://crlzp2fwh8.execute-api.eu-west-1.amazonaws.com/dev"},A=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("".concat(R.api,"/heartbeat"),{headers:{accesstoken:t,"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",new Promise((function(e){e(a)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(m.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.post("".concat(R.api,"/db/").concat(t),JSON.stringify(a),{headers:{accesstoken:n,"Content-Type":"application/json"}});case 2:return r=e.sent,e.abrupt("return",new Promise((function(e){e(r)})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.post("".concat(R.api,"/register"),JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",new Promise((function(e){e(a)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D={Input:{height:40,margin:"10px 0px",padding:7},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},U=function(){var e=Object(l.useRecoilState)(C),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({username:"",password:"",email:"",authCode:"",stage:0,error:""}),s=Object(p.a)(o,2),d=s[0],f=s[1];Object(n.useEffect)((function(){c("signup")}),[c,a]);var b=function(e){f(Object(u.a)(Object(u.a)({},d),{},Object(P.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.username,a=d.password,n=d.email,e.prev=1,e.next=4,h.a.signUp({username:t,password:a,attributes:{email:n}});case 4:f(Object(u.a)(Object(u.a)({},d),{},{stage:1,error:{name:"Empty"}})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),f(Object(u.a)(Object(u.a)({},d),{},{error:e.t0})),console.log("error signing up...",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.username,a=d.authCode,n=d.email,e.prev=1,e.next=4,h.a.confirmSignUp(t,a);case 4:return e.next=6,z({username:t,email:n,tip:"usersauth",vreme:(new Date).getTime()});case 6:f(Object(u.a)(Object(u.a)({},d),{},{stage:2,error:{name:"Empty"}})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),f(Object(u.a)(Object(u.a)({},d),{},{error:e.t0})),console.log("error confirming signing up...",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,0===d.stage&&r.a.createElement("div",{style:D.formContainer},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),d.error&&r.a.createElement(T,{errorMessage:d.error}),r.a.createElement(k.a,{onChange:b,placeholder:"\u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b",name:"username",value:d.username,style:D.Input}),r.a.createElement(k.a,{onChange:b,placeholder:"\u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:d.password,type:"password",style:D.Input}),r.a.createElement(k.a,{onChange:b,placeholder:"Email",name:"email",value:d.email,style:D.Input}),r.a.createElement("div",{style:D.button,onClick:g},r.a.createElement("span",{style:D.buttonText},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),1===d.stage&&r.a.createElement("div",{style:D.formContainer},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),d.error&&r.a.createElement(T,{errorMessage:d.error}),r.a.createElement(k.a,{onChange:b,placeholder:"Authorization Code",name:"authCode",value:d.authCode,style:D.Input}),r.a.createElement("div",{style:D.button,onClick:E},r.a.createElement("span",{style:D.buttonText},"\u041f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),2===d.stage&&r.a.createElement(r.a.Fragment,null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430 ,",r.a.createElement("a",{href:"/app/login"},"\u0412\u0445\u043e\u0434")))},B={Input:{height:40,margin:"10px 0px",padding:7,width:"100%"},formContainer:{display:"flex",flexDirection:"column"},button:{backgroundColor:"rebeccapurple",padding:"15px 7px",cursor:"pointer",textAlign:"center",marginBottom:10},buttonText:{color:"white"}},K=function(){var e=Object(l.useRecoilState)(C),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({username:"",error:"",validation:"",password:"",confirmPassword:"",stage:0}),s=Object(p.a)(o,2),d=s[0],f=s[1];Object(n.useEffect)((function(){c("forgot")}),[c,a]);var b=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.forgotPassword(d.username);case 3:f(Object(u.a)(Object(u.a)({},d),{},{stage:1})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),f(Object(u.a)(Object(u.a)({},d),{},{error:e.t0}));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),g=function(){f(Object(u.a)(Object(u.a)({},d),{},{stage:2}))},E=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,d.password!==d.confirmPassword){e.next=7;break}return e.next=4,h.a.forgotPasswordSubmit(d.username,d.validation,d.password);case 4:f(Object(u.a)(Object(u.a)({},d),{},{stage:3,error:{name:"Empty"}})),e.next=8;break;case 7:f(Object(u.a)(Object(u.a)({},d),{},{error:{name:"PasswordNotMatch",message:"Passwords don't Match"}}));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),f(Object(u.a)(Object(u.a)({},d),{},{error:e.t0}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),v=function(e){f(Object(u.a)(Object(u.a)({},d),{},Object(P.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0417\u0430\u0431\u0440\u0430\u0432\u0435\u043d\u0430 \u041f\u0430\u0440\u043e\u043b\u0430"),d.error&&r.a.createElement(T,{errorMessage:d.error}),0===d.stage&&r.a.createElement("div",{style:B.formContainer},r.a.createElement(k.a,{onChange:v,placeholder:"username",name:"username",value:d.username,style:B.Input}),r.a.createElement("div",{role:"button",tabIndex:0,style:B.button,onClick:b,onKeyDown:b},r.a.createElement("span",{style:B.buttonText},"\u041d\u0430\u043f\u0440\u0435\u0434"))),1===d.stage&&r.a.createElement("div",null,r.a.createElement("div",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u0438 E-mail-a \u0441\u0438 \u0437\u0430 \u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u0449 \u043a\u043e\u0434"),r.a.createElement(k.a,{onChange:v,placeholder:"\u043f\u043e\u0442\u0432\u044a\u0440\u0436\u0434\u0430\u0432\u0430\u0449 \u043a\u043e\u0434",name:"validation",value:d.validation,style:B.Input}),r.a.createElement("div",{role:"button",tabIndex:0,style:B.button,onClick:g,onKeyDown:g},r.a.createElement("span",{style:B.buttonText},"\u041e\u041a"))),2===d.stage&&r.a.createElement("div",null,r.a.createElement(k.a,{type:"password",onChange:v,placeholder:"\u043d\u043e\u0432\u0430 \u043f\u0430\u0440\u043e\u043b\u0430",name:"password",value:d.password,style:B.Input}),r.a.createElement("br",null),r.a.createElement(k.a,{type:"password",onChange:v,placeholder:"\u043f\u043e\u0442\u0432\u044a\u0440\u0434\u0438 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430",name:"confirmPassword",value:d.confirmPassword,style:B.Input}),r.a.createElement("div",{role:"button",tabIndex:0,href:"/",style:B.button,onClick:E,onKeyDown:E},r.a.createElement("span",{style:B.buttonText},"\u0421\u043c\u0435\u043d\u0438 \u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430"))),3===d.stage&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,"\u043f\u0430\u0440\u043e\u043b\u0430\u0442\u0430 \u0441\u043c\u0435\u043d\u0435\u043d\u0430,",r.a.createElement("a",{href:"/app/login"},"\u0412\u0445\u043e\u0434"))))},Q=a(98),L=a(90),V=a(45),W=a(611),G=a(607),H=a(329),X=a.n(H),Y=a(330),Z=a.n(Y),$=a(331),ee=a.n($)()(Z.a),te=W.a.Meta,ae=k.a.Search,ne=function(e){var t=e.item,a=e.user,c=(e.showfollow,Object(n.useState)(t.comment||[])),o=Object(p.a)(c,2),l=o[0],u=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{style:{marginBottom:5}},r.a.createElement(te,{title:r.a.createElement(r.a.Fragment,null,"@".concat(t.user_id," "),r.a.createElement("small",null,r.a.createElement(X.a,{date:t.created_at,formatter:ee}))),description:t.tweet}),l[0]&&l.map((function(e){return r.a.createElement(G.a,{key:e.id,author:e.user_id,content:r.a.createElement("p",null,e.comment)})})),a&&r.a.createElement(ae,{placeholder:"input search text",enterButton:"\u041a\u043e\u043c\u0435\u043d\u0442\u0438\u0440\u0430\u0439",size:"medium",onSearch:function(e){var n={comment:e};u([].concat(Object(V.a)(l),[n])),q("Comment",{post_id:t.id,comment:e},a.token)}})))};function re(){var e=Object(Q.a)(["\n    {\n      Tweet(order_by: { id: desc }, limit: 10) {\n        user_id\n        tweet\n        created_at\n        id\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n    }\n  "]);return re=function(){return e},e}var ce=function(){var e=Object(l.useRecoilState)(C),t=Object(p.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){c("home")}),[c,a]);var o=Object(v.useQuery)(Object(L.a)(re())),u=o.data,s=o.loading,i=o.error;return s?"Loading...":i?"Error! ".concat(i.message):r.a.createElement(r.a.Fragment,null,u.Tweet.map((function(e){return r.a.createElement(ne,{key:e.id,item:e})})))};function oe(){var e=Object(Q.a)(['\n    {\n      Tweet(where: { user_id: { _eq: "','" } }, order_by: { id: desc },limit:100) {\n        tweet\n        created_at\n        id\n        user_id\n      }\n    }\n  ']);return oe=function(){return e},e}var le=function(e){var t=e.user,a=Object(f.g)().id,c=Object(l.useRecoilState)(C),o=Object(p.a)(c,2),u=o[0],s=o[1];Object(n.useEffect)((function(){s("dddd")}),[s,u]);var i=Object(v.useQuery)(Object(L.a)(oe(),a)),m=i.data,d=i.loading,b=i.error;return d?"Loading...":b?"Error! ".concat(b.message):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,a),m.Tweet[0]?m.Tweet.map((function(e){return r.a.createElement(ne,{key:e.id,item:e,user:t})})):r.a.createElement(r.a.Fragment,null,"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u044a\u0449\u0435\u0441\u0442\u0432\u0443\u0432\u0430"))},ue=a(608),se=a(210),ie=a(345);function me(){var e=Object(Q.a)(["\n    {\n      Tweet(where: {}, order_by: { id: desc }, limit: 100) {\n        id\n        user_id\n        tweet\n        created_at\n        comment {\n          id\n          comment\n          user_id\n        }\n      }\n    }\n  "]);return me=function(){return e},e}var pe=function(e){var t=e.user,a=Object(v.useQuery)(Object(L.a)(me())),n=a.data,c=a.loading,o=a.error;return c?"Loading...":o?"Error! ".concat(o.message):r.a.createElement(r.a.Fragment,null,n.Tweet.map((function(e){return r.a.createElement(ne,{key:e.id,item:e,user:t,showfollow:!0})})))};function de(){var e=Object(Q.a)(['\n    {\n     Tweet(where: {wall: {follower_id: {_eq: "','"}}}, order_by: {created_at: desc}) {\n    id\n    user_id\n    created_at\n    tweet\n    comment {\n          id\n          comment\n          user_id\n        }\n  }\n   Follow(where: {follower_id: {_eq: "','"}}) {\n    following_id\n  }\n    }\n  ']);return de=function(){return e},e}var fe=function(e){var t=e.user,a=Object(se.b)(),n=a.control,c=a.errors,o=a.handleSubmit,l=a.setValue,u=function(){var e=Object(m.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.tweet,l("tweet",""),q("Tweet",{tweet:n},t.token);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Object(v.useQuery)(Object(L.a)(de(),t.username,t.username)),p=s.data,d=s.loading,f=s.error;return d?"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043c...":f?"\u0417\u0430\u0440\u0435\u0436\u0434\u0430\u043c...".concat(f):r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:o(u)},r.a.createElement(se.a,{as:r.a.createElement(ue.a,{id:"outlined-basic",error:!!c.tweet,label:(c.tweet,"\u043a\u0430\u043a\u0432\u043e \u043c\u0438\u0441\u043b\u0438\u0442\u0435 ".concat(t.username,"?")),variant:"outlined",style:{width:"80%"}}),defaultValue:"",name:"tweet",control:n,rules:{required:!0}}),r.a.createElement(ie.a,{type:"primary",htmlType:"submit",style:{width:"20%",height:56}},"\u0427\u0443\u0440\u0443\u043b\u0438\u043a!")),JSON.stringify(),p.Follow.length>=1?p.Tweet.map((function(e){return r.a.createElement(ne,{item:e,user:t})})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u0438"),r.a.createElement(pe,{user:t,showfollow:!0})))};var be=new w.a({uri:"https://rudixdb.herokuapp.com/v1/graphql"});E.a.configure({aws_project_region:"eu-west-1",aws_cognito_identity_pool_id:"eu-west-1:3f5f916d-2252-487f-99c0-7aa69115f973",aws_cognito_region:"eu-west-1",aws_user_pools_id:"eu-west-1_T6v05tjzh",aws_user_pools_web_client_id:"eqlretnsetkj5p57bqtandjqa",oauth:{}});var ge=function(){var e=Object(l.useRecoilState)(_),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(l.useRecoilValue)(C),s=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),r=Object(p.a)(a,2),c=r[0],o=r[1];return[c,function(t){try{var a=t instanceof Function?t(c):t;o(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]}("theme",!1),E=Object(p.a)(s,2),w=E[0],y=E[1],k=new O.a({link:be,cache:new j.a}),S=function(){var e=Object(m.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.signOut();case 2:localStorage.setItem("user",JSON.stringify({})),c({});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=localStorage.getItem("user"),t=e?JSON.parse(e):{};c(t)}),[c]),Object(n.useEffect)((function(){var e=function(){var e=Object(m.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.token){e.next=12;break}return e.next=3,A(a.token);case 3:if("TokenExpiredError"!==e.sent.data.name){e.next=12;break}return e.next=7,h.a.currentAuthenticatedUser();case 7:return t=e.sent,e.next=10,h.a.currentSession();case 10:n=e.sent,t.refreshSession(n.refreshToken,(function(e,t){var n=Object(u.a)(Object(u.a)({},a),{},{token:t.accessToken.jwtToken});c(n),localStorage.setItem("user",JSON.stringify(n))}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(Object(m.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e();case 1:case"end":return t.stop()}}),t)}))),2e4);return function(){return clearInterval(t)}}),[a,c]),r.a.createElement(v.ApolloProvider,{client:k},r.a.createElement(d.a,null,r.a.createElement("div",{className:w?"dark":"white"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"/logo.png",alt:""})),r.a.createElement(b.a,{selectedKeys:[o],mode:"horizontal"},r.a.createElement(b.a.Item,{key:"home"},r.a.createElement(d.b,{to:"/"},"\u041d\u0430\u0447\u0430\u043b\u043e")),a.username?r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Item,{key:"logout"},r.a.createElement(d.b,{to:"/",onClick:function(){return S()}},"\u0418\u0437\u0445\u043e\u0434"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a.Item,{key:"login"},r.a.createElement(d.b,{to:"/app/login"},"\u0412\u0445\u043e\u0434")),r.a.createElement(b.a.Item,{key:"signup"},r.a.createElement(d.b,{to:"/app/signup"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),r.a.createElement(b.a.Item,{key:"forgot"},r.a.createElement(d.b,{to:"/app/forgot"},"\u0417\u0430\u0431\u0440. \u041f\u0430\u0440\u043e\u043b\u0430")))),r.a.createElement("div",{className:"switcher"},r.a.createElement(g.a,{defaultChecked:w,onChange:function(){return y(!w)}})),r.a.createElement(x,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/app/login"},a.username?r.a.createElement(f.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u0412\u0445\u043e\u0434"),r.a.createElement(N,{type:"full"}))),r.a.createElement(f.b,{path:"/app/forgot"},r.a.createElement(K,null)),r.a.createElement(f.b,{path:"/app/signup"},r.a.createElement(U,null)),r.a.createElement(f.b,{path:"/:id"},a.username?r.a.createElement(le,{user:a}):r.a.createElement(le,null)),r.a.createElement(f.b,{path:"/"},a.username?r.a.createElement(fe,{user:a}):r.a.createElement(ce,{menu:"home"})))))))};o.a.render(r.a.createElement(l.RecoilRoot,null,r.a.createElement(ge,null)),document.getElementById("root"))}},[[352,1,2]]]);
//# sourceMappingURL=main.7c69d4d9.chunk.js.map